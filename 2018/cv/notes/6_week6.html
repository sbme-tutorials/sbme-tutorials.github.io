<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Week 6: Corner Detection</title>
  <meta name="description" content="These pages shall contain all the materials corresponding to courses, assigned to me, in the SBME department at Cairo University.">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/2018/cv/notes/6_week6.html">
  <link rel="alternate" type="application/rss+xml" title="Tutorials for SBME Students" href="/feed.xml">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    <!-- 
     -->
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
    
<!--   
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
            <a class="page-link" href="/2018/cv/assignments/1_assignment1.html">Assignment 1: Images, Histograms, Gradients</a>
            
          
            
            
            <a class="page-link" href="/2018/dsp/notes/1_week1.html">Week 1: Signals in Python</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/1_week1.html">Week 1: Warming up with Python Basics</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/1_week1a.html">Week 1 - Part 1: Basics of C++</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/1_week1a.html">Assignment 1 - part 1: Your first experience with Git and our Github classroom</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/1_week1b.html">Week 1 - Part 2: Basics of Git and Github</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/1_week1b.html">Assignment 1 - part 2: Revision on C++</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/1_week1re.html">Task 1: Resubmission</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/assignments/2_assignment2.html">Assignment 2</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/2_code_formatting.html">Code Styling (formatting): Enhancing Your Code Readability</a>
            
          
            
            
            <a class="page-link" href="/2018/dsp/notes/2_week2.html">Week 2: Signals and Basis Functions: Composition and Decomposition</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/2_week2.html">Week 2: Image Processing 1</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/2_week2a.html">Week 2 - Part1: Memory, pointers, and references</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/2_week2a.html">Assignment 2: C++ Basic Operations on Memory</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/assignments/3_assignment3.html">Assignment 3</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_faq1.html">FAQ #1: Why exposing namespaces is a bad practice</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_faq2.html">FAQ #2: Why `int *p = &amp;x` != `*p = &amp;x`</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_faq3.html">FAQ #3: Why not using `std::cin` inside functions of particular logic</a>
            
          
            
            
            <a class="page-link" href="/2018/dsp/notes/3_week3.html">Week 3: Euler&#39;s Identity, Sinusoids, and Fourier</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/3_week3.html">Week 3: Images in Frequency Domain</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_week3a.html">Week 3 - Part1: Static Arrays and Dynamic Arrays</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/3_week3a.html">Assignment 3 - Part 1: Arrays</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/3_week3b.html">Week 3 - Part2: Command Line Arguments and Compilation of Multiple Files</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/3_week3b.html">Assignment 3 - Part 2: Struct and Functions Overloading</a>
            
          
            
            
          
            
            
            <a class="page-link" href="/2018/dsp/notes/4_week4.html">Week 3: Euler&#39;s Identity, Sinusoids, and Fourier</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/4_week4.html">Week 4: Image Filtering and Edge Detection</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/4_week4a.html">Week 4 - Part1: Struct, Stacks, Linked Lists, and Queues</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/4_week4a.html">Group Assignment 4 - Part 1: Git for Teams and Markdown Resumes</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/4_week4b.html">Week 4 - Part2: More on Structs, Linked Lists, Naming Conventions, Const-correctness, Build Systems, and Git for Teams</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/4_week4b.html">Assignment 4: Stacks and Queues</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/5_week5.html">Week 5: Hough Transform (Line and Circle Detection)</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/5_week5a.html">Week 5 - Part1: Recursion, Big-Oh Notation, Markdown</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/6_week6.html">Week 6: Corner Detection</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/6_week6a.html">Week 6 - Part1: Sorting, Bubble Sort, Selection Sort, Learning Resources</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/7_exercises.html">Exercises 1: C++ Basics and Linear Data Structures</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/7_week7.html">Week 7: Segmentation (Thresholding and Region growing)</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/7_week7a.html">Week 7 - Part1: Revision, Common Mistakes, and Best Practices, Type normalization using C++ templates</a>
            
          
            
            
            <a class="page-link" href="/2018/cv/notes/8_week8.html">Week 8: Segmentation (Clustering Segmentation)</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/8_week8a.html">Week 8 - Part1: Binary Search Trees, Sets (ADT) and Maps (ADT)</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/8_week8b.html">Week 8 - Part2: Heaps, Priority Queues (ADT), and Shortest Path Problem</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/notes/9_week9.html">Week 7 - Part1</a>
            
          
            
            
            <a class="page-link" href="/about/">About</a>
            
          
            
            
            <a class="page-link" href="/2018/data-structures/assignments/resumes/asem.html">Resume</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
     -->
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Week 6: Corner Detection</h1>
  </header>

  <div class="post-content">
    <ul id="markdown-toc">
  <li><a href="#readings" id="markdown-toc-readings">Readings</a></li>
  <li><a href="#motivation" id="markdown-toc-motivation">Motivation</a>    <ul>
      <li><a href="#good-feature-properties" id="markdown-toc-good-feature-properties">Good feature properties</a></li>
    </ul>
  </li>
  <li><a href="#patch-matching" id="markdown-toc-patch-matching">Patch Matching</a>    <ul>
      <li><a href="#which-patch-to-select-" id="markdown-toc-which-patch-to-select-">Which patch to select ?</a></li>
    </ul>
  </li>
  <li><a href="#hessian-matrix" id="markdown-toc-hessian-matrix">Hessian Matrix</a>    <ul>
      <li><a href="#eigen-values-and-eigen-vectors" id="markdown-toc-eigen-values-and-eigen-vectors">Eigen Values and Eigen Vectors</a></li>
    </ul>
  </li>
  <li><a href="#corner-detector-using-eigen-values" id="markdown-toc-corner-detector-using-eigen-values">Corner Detector using eigen values</a></li>
  <li><a href="#harris-operator" id="markdown-toc-harris-operator">Harris Operator</a>    <ul>
      <li><a href="#basic-implementation" id="markdown-toc-basic-implementation">Basic Implementation</a></li>
      <li><a href="#results" id="markdown-toc-results">Results</a></li>
    </ul>
  </li>
  <li><a href="#harris-and-stephens-operator" id="markdown-toc-harris-and-stephens-operator">Harris and Stephens operator</a>    <ul>
      <li><a href="#results-1" id="markdown-toc-results-1">Results</a></li>
    </ul>
  </li>
  <li><a href="#features-from-accelerated-segment-test-fast" id="markdown-toc-features-from-accelerated-segment-test-fast">Features from Accelerated Segment Test (FAST)</a>    <ul>
      <li><a href="#basic-algorithm" id="markdown-toc-basic-algorithm">Basic Algorithm</a></li>
      <li><a href="#high-speed-test" id="markdown-toc-high-speed-test">High Speed Test</a></li>
      <li><a href="#none-max-suppression" id="markdown-toc-none-max-suppression">None-Max suppression</a></li>
      <li><a href="#results-2" id="markdown-toc-results-2">Results</a></li>
    </ul>
  </li>
  <li><a href="#useful-links" id="markdown-toc-useful-links">Useful links</a></li>
</ul>

<h2 id="readings">Readings</h2>
<p><a href="http://aishack.in/tutorials/features/">Fundamentals of Features and Corners</a></p>

<h2 id="motivation">Motivation</h2>
<p>Image matching is an important task in computer vision. We need to know if two different images are for same scene or not. It is a challenging task. Challenges arise from different geometric and photometric transformation. Geometric transformations include translation, rotation and scaling. Photometric transformations like change in brightness or exposure. For example, next two figures are images for same scene. How can we match them ?</p>

<p><img style="width:120%" src="../images/ImMatching.png" align="middle" /></p>

<h3 id="good-feature-properties">Good feature properties</h3>
<p>Good features must be</p>
<ul>
  <li>Unique and distinctive</li>
  <li>Robust and efficient</li>
  <li>Global and not specific</li>
</ul>

<h2 id="patch-matching">Patch Matching</h2>
<p>The basic idea for image matching is patch matching. Patch matching is applied by selection of patch (square) in one image and match it with a patch in the other image.</p>

<h3 id="which-patch-to-select-">Which patch to select ?</h3>

<p>As we seen in the next figure, the patch in left image will be matched with many patches in the right image. So it will be confusing to select such patch. We need a patch with unique shape in the image.</p>

<p><img style="width:85%" src="../images/unique1.jpg" align="middle" /></p>

<p>Now what about patches selected in left image. It will be matched with an alternative unique one in the right image. We can conclude that corners are unique points in images. We can use corners as image feature.</p>

<p><img style="width:85%" src="../images/unique2.jpg" align="middle" /></p>

<p>Let’s compare different image region</p>

<p><img style="width:70%" src="../images/Corners.png" align="middle" /></p>

<p>Flat region has no variation in both directions. Edges are better as it has a variation in one direction, but it still not unique. Corners has changes in both direction and it is unique point. So conclusion is that corner is a good image feature. The next question now is given an image, How to detect its corners(features)?</p>
<h2 id="hessian-matrix">Hessian Matrix</h2>
<p>Corner is identified by its large variation in both x and y directions. Mathematically we can build what so called hessian matrix that state the variation (derivative) in x, y and xy direction. Let <script type="math/tex">p</script> is a pixel in the image <script type="math/tex">I</script> hessian matrix is defined as follow:</p>

<script type="math/tex; mode=display">% <![CDATA[
H = \begin{bmatrix}
I_{xx}(p) & I_{xy}(p) \\ I_{xy}(p) & I_{yy}(p) & 
\end{bmatrix} %]]></script>

<p>Where <script type="math/tex">I_{xx}(p)</script> is the second derivative of image in x direction at point p. <script type="math/tex">I_{yy}(p)</script> is the second derivative of image in y direction at point p. <script type="math/tex">I_{xy}(p)</script> is the partial derivative in x and y at point p.</p>
<h3 id="eigen-values-and-eigen-vectors">Eigen Values and Eigen Vectors</h3>
<p>Eigen vectors identify direction of data variation and corresponding Eigen values identify magnitude of variation that direction. For example</p>

<p>In the following figure we have two eigen vectors <script type="math/tex">u</script> and <script type="math/tex">v</script>. Each vector has a length corresponding to its eigen value. So there is a large variation in <script type="math/tex">u</script> direction and lower variation in <script type="math/tex">v</script> direction.</p>

<p><img style="width:50%" src="../images/eig1.png" align="middle" /></p>

<p>We can calculate eigen values using following equation</p>

<script type="math/tex; mode=display">|\lambda I - H| = 0</script>

<h2 id="corner-detector-using-eigen-values">Corner Detector using eigen values</h2>
<p>Getting the two eigen values of hessian matrix for all points will tell us category of that point. If both values are small so we in a flat region and no variation in any direction. If one of eigen values larger than the other So we have an edge point. And if both eigen values are large so we have a corner. Next figure illustrates that.</p>

<p><img style="width:70%" src="../images/eig2.png" /></p>

<p>But calculating eigen values of hessian matrix for all image pixels is computationally complicated. So another operators was proposed.</p>
<h2 id="harris-operator">Harris Operator</h2>
<p>Harris operator or harris corner detector is more simple. It identifies corner from hessian matrix as follow:</p>

<script type="math/tex; mode=display">Harris = det(H) - a \times trace(H)</script>

<p>Where <script type="math/tex">a</script> is a constant and <script type="math/tex">trace(H)</script> is the sum of diagonal elements of hessian matrix. Corners will have a high value of its harris operator.</p>

<p><strong>Lets Try to implement it</strong></p>

<h3 id="basic-implementation">Basic Implementation</h3>

<ul>
  <li>Load some libraries</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">signal</span>
</code></pre></div></div>

<ul>
  <li>Let’s define our custom harris method</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">myHarris</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
    <span class="s">'''
    Compute Harris operator using hessian matrix of the image 
    input : image 
    output : Harris operator.
</span></code></pre></div></div>
<ul>
  <li>Now we have to build hessian matrix 
As we know sobel operator is an approximation of first order derivative
<strong>Note :</strong> if we want the second derivative basically we need to differentiate twice.
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># x derivative</span>
  <span class="n">sobelx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                     <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
                     <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>

  <span class="c">#y derivative</span>
  <span class="n">sobely</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                     <span class="p">[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span>
                     <span class="p">[</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">1</span><span class="p">]])</span>
  <span class="c"># Get Ixx </span>
  <span class="c"># To get second derivative differentiate twice.</span>
  <span class="n">Ixx</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">convolve2d</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">convolve2d</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">sobelx</span><span class="p">,</span> <span class="s">"same"</span><span class="p">),</span><span class="n">sobelx</span><span class="p">,</span><span class="s">"same"</span><span class="p">)</span>     
  <span class="c"># Iyy  </span>
  <span class="n">Iyy</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">convolve2d</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">convolve2d</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">sobely</span><span class="p">,</span> <span class="s">"same"</span><span class="p">),</span><span class="n">sobely</span><span class="p">,</span><span class="s">"same"</span><span class="p">)</span>
  <span class="c"># Ixy Image </span>
  <span class="n">Ixy</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">convolve2d</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">convolve2d</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">sobelx</span><span class="p">,</span> <span class="s">"same"</span><span class="p">),</span><span class="n">sobely</span><span class="p">,</span><span class="s">"same"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>Finally calculate Harris operator
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c"># Get Determinant and trace </span>
  <span class="n">det</span> <span class="o">=</span> <span class="n">Ixx</span><span class="o">*</span><span class="n">Iyy</span> <span class="o">-</span> <span class="n">Ixy</span><span class="o">**</span><span class="mi">2</span>
  <span class="n">trace</span> <span class="o">=</span> <span class="n">Ixx</span> <span class="o">+</span> <span class="n">Iyy</span>

  <span class="c"># Harris is det(H) - a * trace(H) let a = 0.2 </span>
  <span class="n">H</span> <span class="o">=</span> <span class="n">det</span> <span class="o">-</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">trace</span>
</code></pre></div>    </div>
  </li>
  <li>Lets show them and return harris operator</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c"># Lets show them </span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="s">"Original Image"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="s">"Ixx"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Ixx</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">set_cmap</span><span class="p">(</span><span class="s">"gray"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="s">"Iyy"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Iyy</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="s">"Ixy"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Ixy</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="s">"Harris Operator"</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="nb">abs</span><span class="p">(</span><span class="n">H</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">H</span>
</code></pre></div></div>
<ul>
  <li>Finally we need to test our method</li>
</ul>

<p>we will build a basic test image in our own. It is a black image with a white square in it.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">))</span>
<span class="n">image</span><span class="p">[</span><span class="mi">50</span><span class="p">:</span><span class="mi">150</span><span class="p">,</span><span class="mi">50</span><span class="p">:</span><span class="mi">150</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>

<span class="c"># Get harris </span>
<span class="n">harris</span> <span class="o">=</span> <span class="n">myHarris</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="results">Results</h3>
<ul>
  <li>Original Image
<img src="../images/original_image-w6.png" alt="" /></li>
  <li>2nd Derivative in x <script type="math/tex">I_{xx}</script>
<img src="../images/ixx.png" alt="" />
derivative in x direction will produce a vertical edges</li>
  <li>2nd Derivative in y <script type="math/tex">I_{yy}</script>
<img src="../images/iyy.png" alt="" />
derivative in y direction will produce a horizontal edges</li>
  <li>Partial derivative of x and y <script type="math/tex">I_{xy}</script>
<img src="../images/ixy.png" alt="" />
derivative of both direction will distinct corner points.</li>
  <li>Harris operator
<img src="../images/harris.png" alt="" /></li>
</ul>

<p><strong>What’s next?</strong>
We can then get maximum points in harris image according to threshold value, identify its coordinates and overlie it on the original image.</p>

<p>Result of harris on real images will be like that</p>

<p><img style="width:170%" src="../images/harrissR.png" align="middle" /></p>

<h2 id="harris-and-stephens-operator">Harris and Stephens operator</h2>
<p>It is not a new method for corner detection. It computes the harris operator also not from hessian matrix but from G matrix where G matrix is</p>

<script type="math/tex; mode=display">% <![CDATA[
G(\rho, \sigma)  = \begin{bmatrix}
L_x^2(\rho, \sigma) &   L_x(\rho, \sigma)L_y(\rho, \sigma) \\  L_x(\rho, \sigma) L_y(\rho, \sigma) & L_y^2(\rho, \sigma) 
\end{bmatrix} %]]></script>

<p>instead of calculating second derivative. Use square of first derivative image that has smoothed with gaussian filter.</p>

<h3 id="results-1">Results</h3>
<p>This is the result of custom implementation</p>

<p><img style="width:170%" src="../images/harr2R.png" align="middle" /></p>

<h2 id="features-from-accelerated-segment-test-fast">Features from Accelerated Segment Test (FAST)</h2>
<p>It is used for real time applications with limited computing resource. It identifies the corner from surrounding 16 pixels on a circle of radius 3 from interested point.</p>

<p><img style="width:100%" src="../images/fast.png" /></p>

<h3 id="basic-algorithm">Basic Algorithm</h3>
<p>Psedo code for basic algorithm is</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">1.</span> <span class="n">Select</span> <span class="n">Pixel</span> <span class="n">p</span> <span class="k">with</span> <span class="n">intensity</span> <span class="n">Ip</span> 
<span class="mf">2.</span> <span class="n">Select</span> <span class="n">Threshold</span> <span class="n">t</span>
<span class="mf">3.</span> <span class="n">Consider</span> <span class="n">circle</span> <span class="k">with</span> <span class="mi">16</span> <span class="n">pixels</span><span class="o">.</span>
<span class="mf">4.</span> <span class="n">Calculate</span> <span class="n">absolute</span> <span class="n">difference</span> <span class="n">between</span> <span class="n">Ip</span><span class="p">,</span><span class="n">Ii</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">=</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">16</span>
<span class="mf">5.</span> <span class="n">P</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">corner</span> <span class="k">if</span> <span class="n">n</span> <span class="n">points</span> <span class="n">have</span> <span class="n">absolute</span> <span class="n">difference</span> <span class="o">&gt;</span> <span class="n">t</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">6</span>
<span class="mf">6.</span> <span class="n">Suppress</span> <span class="n">weak</span> <span class="n">corners</span> <span class="p">(</span><span class="bp">None</span><span class="o">-</span><span class="n">Max</span> <span class="n">suppression</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="high-speed-test">High Speed Test</h3>
<p>Basically check using only four points.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mf">4.</span> <span class="n">Calculate</span> <span class="n">absolute</span> <span class="n">difference</span> <span class="n">between</span> <span class="n">Ip</span><span class="p">,</span><span class="n">Ii</span> <span class="n">Considering</span> <span class="n">i</span> <span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">13</span> <span class="n">only</span><span class="o">.</span>
<span class="mf">5.</span> <span class="n">P</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">corner</span> <span class="k">if</span> <span class="n">n</span> <span class="n">points</span> <span class="n">have</span> <span class="n">absolute</span> <span class="n">difference</span> <span class="o">&gt;</span> <span class="n">t</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">3</span>
<span class="mf">6.</span> <span class="n">Suppress</span> <span class="n">weak</span> <span class="n">corners</span> <span class="p">(</span><span class="bp">None</span><span class="o">-</span><span class="n">Max</span> <span class="n">suppression</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="none-max-suppression">None-Max suppression</h3>
<p>It is common in both basic and high speed test versions of FAST algorithm</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">For</span> <span class="n">successive</span> <span class="n">corners</span><span class="o">.</span>
<span class="mf">1.</span> <span class="n">For</span> <span class="n">each</span> <span class="n">corner</span> <span class="n">point</span> <span class="n">p</span>
<span class="mf">1.</span> <span class="n">Compute</span> <span class="n">score</span> <span class="n">V</span> <span class="n">which</span> <span class="ow">is</span> <span class="nb">sum</span> <span class="n">of</span> <span class="n">absolute</span> <span class="n">difference</span> <span class="n">between</span> <span class="n">point</span> <span class="n">p</span> <span class="ow">and</span> <span class="mi">16</span> <span class="n">circle</span> <span class="n">points</span><span class="o">.</span>
<span class="mf">2.</span> <span class="n">Suppress</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">local</span> <span class="n">maximum</span><span class="o">.</span> 
</code></pre></div></div>

<h3 id="results-2">Results</h3>
<p>This is the result of high speed test custom implementation.</p>

<p><img style="width=150" src="../images/Fast.png" /></p>

<h2 id="useful-links">Useful links</h2>
<p><a href="https://docs.opencv.org/3.0-beta/doc/py_tutorials/py_feature2d/py_features_harris/py_features_harris.html">Harris OpenCV</a></p>

<p><a href="https://docs.opencv.org/3.0-beta/doc/py_tutorials/py_feature2d/py_fast/py_fast.html">Fast Algorithm</a></p>

<p><a href="https://www.edwardrosten.com/work/fast.html">FAST Corner Detection Edward Rosten</a></p>

  </div>

</article>

<!-- 
Thanks to Roman Cheplyaka for his instructions to minifying the mathjax package:
https://ro-che.info/articles/2017-04-02-deploying-mathjax 
-->

<script src="/mathjax/MathJax.js"></script>

<script type="text/javascript">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    tex2jax: { inlineMath: [['$', '$'], ['\\(', '\\)']], skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'] },
    jax: ["input/TeX", "output/HTML-CSS"],
    "HTML-CSS": {
      availableFonts: ["TeX"],
      imageFont: null
    },
    MathMenu: {
      showRenderer: false,
      showFontMenu: false,
      showLocale: false
    }
  });
</script>
      </div>
    </main>

    <footer class="site-footer">
  <div class="wrapper">

    <!-- <h2 class="footer-heading">Tutorials for SBME Students</h2> -->

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              Asem Alaa
            
            </li>
            
            <li><a href="mailto:asem.a.abdelaziz@gmail.com">asem.a.abdelaziz@gmail.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/A-Alaa"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">A-Alaa</span></a>

          </li>
          

          
            <li>
              <a href="https://linkedin.com/in/asem-alaa">
                <i class="fa fa-linkedin"></i> LinkedIn
              </a>
            </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>These pages shall contain all the materials corresponding to  courses, assigned to me, in the SBME department at Cairo University.</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
